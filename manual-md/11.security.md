##安全解决方案

###CSRF 跨站请求伪造解决方案：表单提交时使用 token 效验
请自己实现

###XSS 跨站脚本攻击解决方案：过滤浏览器输入的值
**使用方法：**
选择上节 Monkey\Library\Filter 类中的 xss####方法来过滤输入值：

1. xssToText($data)，直接删除所有 html 和 php 标签，使得浏览器输入的内容只剩下文本，是最高级别的过滤；
2. xssToHtml($data)，不是删除任何标签，但对标签进行彻底的编码，使得浏览器输入的内容按源码输出，是普通级别的过滤；
3. xssDeleteScript($data)，有选择性的删除 javascript,iframes,object 等有害标签，使得其它内容能保留浏览器输入的 html 样式，是最弱的过滤级别；

###SQL 防注入解决方案：drupal数据库组件
原理（详见源码）

###目录遍历漏洞解决方案：不向浏览器输出后台目录变量
MonkeyPHP 的目录部署分为两个部分

1. www 目录，是 web 服务器指定浏览器可以访问的虚拟目录，这里仅仅存放静态资源文件和浏览器上传的文件。同时还要通过系统设置保证这个目录里的文件没有执行权。
2. system 目录绝不能让浏览器有访问权限。

###DDOS 攻击解决方案：拦截浏览器恶意刷新
公共函数中有一个有效拦截防御 DDOS 的代码。如需使用，请在 system/vendor/autoload.php 文件末尾新增一行 intercept_DDOS();

###会话劫持解决方案：请使用 SSH 或 https 协议取代 http 协议

---
##安全工具——过滤浏览器输入类：Monkey\Library\Filter

###公开方法：

**方法名：** ::compressWhite  
**参数：** array|string $data 待处理数据   
**作用：** 压缩空白字符（包括多余的换行）。返回原格式数据。

**方法名：** ::xssToText 深度防止XSS攻击代码   
**参数：** array|string $data 待处理数据   
**作用：** 删除 html 和 php 标签，使得结果只剩下文本，同时\n等换行符号也会转换。返回原格式数据。

**方法名：** ::xssToHtml 中度防止XSS攻击代码  
**参数：** array|string $data 待处理数据   
**作用：** 编码为 HTML 文本，使得浏览器输入的内容按源码输出。返回原格式数据。

**方法名：** ::xssDeleteScript 轻度防止XSS攻击代码   
**参数：** array|string $data 待处理数据   
**作用：** 删除 javascript,iframes,object等代码，保留 html 样式。返回原格式数据。

**方法名：** ::nl2br 	  
**参数：** array|string $data 待处理数据   
**作用：** 转化文本中的换行符号为<br/>。返回原格式数据。

**方法名：** ::nl2delete 	  
**参数：** array|string $data 待处理数据   
**作用：** 删除文本中的换行符号。返回原格式数据。

**方法名：** ::phptag 	  
**参数：** array|string $data 待处理数据   
**作用：** 仅仅编码 PHP 标签。返回原格式数据。

###注意：

1. ::white 主要减少浏览器输入的冗余信息量。
2. ::xss####则主要用来防止 xss 攻击。
3. 本类都是静态类，且所有方法均返回原$data 格式的数据。 